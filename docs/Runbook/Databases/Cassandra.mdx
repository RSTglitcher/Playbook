---
title: "Cassandra"
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::tip Cassandra
Apache Cassandra is a **distributed NoSQL database** designed for **high availability, horizontal scalability, and fault tolerance**. It handles large volumes of structured data across multiple nodes with no single point of failure.
:::

---

## When to use

* You need a highly available database across multiple data centers.
* You require fast writes and horizontal scaling for large datasets.
* You need tunable consistency for distributed applications.

**Do NOT use Cassandra when:**

* Strong relational constraints (use Postgres/MySQL).
* Small datasets with low scalability requirements.
* Complex joins or transactional guarantees are required.

---

## TA Skills Checklist

- Understand cluster topology and replication strategy.
- Check node and keyspace health.
- Validate backup, repair, and consistency processes.
- Ensure scaling, performance, and partitioning are adequate.

---

## Pre-Requisites

| Action / Service       | What TA Needs to Gather / Confirm |
|-----------------------|----------------------------------|
| Cluster Setup          | Node IPs, seeds, replication factor, data centers |
| Access & Login         | cqlsh access or API credentials, user roles |
| Keyspaces & Tables     | Keyspace names, table schemas, replication strategies |
| Metrics & Monitoring   | Integration with Prometheus/Grafana, JMX ports, alerts configured |

---

## Business As Usual

<Tabs>
<TabItem value="capabilities" label="TA Skills">

```shell
--------------
How to use Cassandra as a TA
--------------

# Check cluster status
nodetool status

# View keyspaces and replication
cqlsh -e "DESCRIBE KEYSPACES;"
cqlsh -e "DESCRIBE KEYSPACE <keyspace_name>;"

# Inspect node metrics and health
nodetool info
nodetool ring

# Check repair and backup status
nodetool repair <keyspace_name>
nodetool snapshot <keyspace_name>

# Check ongoing operations / compactions
nodetool compactionstats
nodetool tpstats
```

</TabItem> <TabItem value="execution" label="SWE Skills">

```shell
--------------
Common ways engineers use Cassandra
--------------

# Connect to cluster
cqlsh <node_ip> -u <username> -p <password>

# Create keyspace
cqlsh> CREATE KEYSPACE my_keyspace WITH REPLICATION = {'class': 'NetworkTopologyStrategy', 'dc1': 3};

# Create table
cqlsh> CREATE TABLE my_keyspace.users (id UUID PRIMARY KEY, name text, email text);

# Insert data
cqlsh> INSERT INTO my_keyspace.users (id, name, email) VALUES (uuid(), 'Alice', 'alice@example.com');

# Query data
cqlsh> SELECT * FROM my_keyspace.users;

# Delete data
cqlsh> DELETE FROM my_keyspace.users WHERE id=<uuid>;

# Scale cluster
nodetool bootstrap / add new nodes to the cluster

# Trigger repairs
nodetool repair <keyspace_name>

# Take snapshots/backups
nodetool snapshot <keyspace_name>
```

</TabItem> </Tabs>

---

## Triage

:::danger
Symptoms of issues with Cassandra and how to triage:
:::

| Symptom                | TLDR of Root Cause                          | What to Check                                      | Action to Propose |
|------------------------|--------------------------------------------|---------------------------------------------------|-----------------|
| Node down              | Hardware failure, network issue, JVM crash | nodetool status, system logs                      | Restart node, check network, rebalance cluster |
| Cluster inconsistency  | Missed repairs, failed writes               | nodetool repair status, hinted handoff           | Run repair, verify replication factor          |
| Slow queries           | High cardinality, unindexed queries         | Query logs, table schema, compaction stats       | Optimize queries, add indexes, adjust compaction|
| High disk usage        | SSTable accumulation, compaction backlog   | nodetool cfstats, disk usage per node            | Run compaction, clean up snapshots, expand storage|
| Tombstone issues       | Excessive deletes / TTL expiry             | nodetool cfstats, read/query performance        | Tune TTL, monitor tombstones, repair cluster   |
| Backup failures        | Snapshot or backup process misconfigured    | Backup logs, snapshot status                      | Fix backup process, validate permissions      |
