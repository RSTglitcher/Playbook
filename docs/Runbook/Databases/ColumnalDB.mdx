---
title: "Columnar Databases Runbook"
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::tip Platform / Topic Runbook
An **engineering-aware reference** for Technical Analysts working with column-family / NoSQL databases such as Cassandra, ScyllaDB, and Amazon Keyspaces.

Focuses on **core services, setup steps, and terminology** needed to understand engineering designs, estimates, and platform constraints.
:::

---

## Overview

Column-family databases are **NoSQL distributed databases** optimized for high throughput, availability, and horizontal scaling.

As a TA, your role is to understand:

* How the database handles replication and partitioning
* How data consistency models impact application correctness
* Where complexity and risk live (nodes, clusters, repair operations, scaling)
* Why estimates may include cluster setup, keyspace design, and migration

## TA Checklist (Quick Review)

* [ ] Cluster access verified
* [ ] Replication and consistency levels understood
* [ ] Backup, repair, and monitoring configured
* [ ] Failure modes reviewed (node down, hinted handoff, tombstones)
* [ ] Keyspaces / tables schema validated

---

<Tabs>
<TabItem value="runbook" label="Runbook">

## Core Concepts (Foundational)

### Column-Family Database

**What it is:**
A distributed, partitioned database that stores data in tables with rows and flexible columns.

**Why engineers care:**

* High throughput and horizontal scaling
* Tunable consistency (eventual vs strong)
* Partitioning key design affects performance

**TA red flags:**

* Misconfigured replication factor or consistency level
* Skewed partition keys causing hot nodes
* Lack of repair and backup procedures

---

## Data & Storage (Engineering-Level)

### Cluster / Node

**What it actually is:**

* Multiple nodes forming a ring
* Each node stores a subset of the data (partitioned by key)
* Replication ensures redundancy across nodes

**Engineering setup includes:**

* Cluster topology (seed nodes, data centers)
* Replication strategy & factor
* Repair / compaction schedules

**TA questions:**

* Are nodes evenly balanced?
* Is replication factor sufficient for fault tolerance?
* Are backups and repair jobs scheduled?

---

## Databases / Keyspaces Comparison

| Feature / Tool          | Cassandra                | ScyllaDB               | Amazon Keyspaces      |
|-------------------------|-------------------------|-----------------------|----------------------|
| Consistency             | Tunable (ONE, QUORUM, ALL) | Tunable (same as Cassandra) | Tunable per table |
| Replication             | Multi-DC / RF configurable | Multi-DC / RF configurable | Multi-Region managed |
| Backup Tools            | nodetool snapshot, custom scripts | nodetool snapshot, custom scripts | Managed by AWS |
| Query Language          | CQL (Cassandra Query Language) | CQL compatible         | CQL compatible       |
| Managed Cloud Option    | Astra DB, Keyspaces     | Managed Scylla Cloud   | AWS Keyspaces        |
| Schema Enforcement      | Semi-structured        | Semi-structured       | Semi-structured      |
| Typical Ports           | 9042 (CQL)             | 9042                  | 9142                 |

---

</TabItem>
<TabItem value="playbook" label="Playbook">

```shell
# ----------------------------
# Kubernetes / Cluster Access
# ----------------------------

# Authenticate to GKE cluster and get credentials
gcloud --project=PROJECT_ID container clusters get-credentials CLUSTER_NAME --location REGION

# Switch kubectl context
kubectx CONTEXT_NAME

# Forward Cassandra service port to local machine
kubectl port-forward services/cassandra-service 9042:9042

# ----------------------------
# Database Access
# ----------------------------

# Connect to Cassandra locally via cqlsh
cqlsh 127.0.0.1 9042 -u USER -p PASSWORD

# ----------------------------
# Inspect / Monitor
# ----------------------------

# Show keyspaces
DESCRIBE KEYSPACES;

# Show tables in a keyspace
DESCRIBE TABLE keyspace_name.table_name;

# Show cluster status
nodetool status

# Check node info
nodetool info

# Check repair / pending tasks
nodetool repair
nodetool netstats

# ----------------------------
# Sanity Checks
# ----------------------------

# Simple query to verify connectivity
SELECT now() FROM system.local;

# Check replication for a keyspace
SELECT keyspace_name, replication FROM system_schema.keyspaces;
```

</TabItem>
</Tabs>