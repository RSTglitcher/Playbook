---
title: "Kubernetes"
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::tip Kubernetes
Kubernetes (K8s) is a **container orchestration platform** that automates deployment, scaling, and management of containerized applications. It is widely used to run microservices architectures, manage distributed workloads, and enable declarative infrastructure management.
:::

---

## When to use

* Deploy, scale, and manage containerized applications across clusters
* Require high availability, service discovery, or automated rolling updates
* Need declarative configuration for infrastructure

**Do NOT use this tool when:**

* Only running a few containers on a single host
* Simple orchestration via Docker Compose suffices
* Complex cluster management is unnecessary

---

## TA Skills Checklist

- Understand cluster architecture and ownership of resources
- Verify PersistentVolume and ConfigMap usage
- Observe workload health, scaling, and alerts
- Identify security or network boundaries

---

## Pre-Requisites

| Action / Service       | What TA Needs to Gather / Confirm |
|------------------------|----------------------------------|
| Cluster Access         | kubeconfig, RBAC permissions, context name |
| CLI Tools              | `kubectl` installed and configured |
| Persistent Storage     | PV/PVCs provisioned and available |
| ConfigMaps / Secrets   | Defined and accessible for workloads |
| Node/Cluster Info      | Cluster size, node count, roles, and autoscaling config |
| Networking             | CNI plugin used, service IP ranges, ingress rules |
| Observability          | Prometheus/Grafana integration, logging enabled |

---

## Business as Usual

```bash
# ----------------------------
# KUBECTL SYNTAX
# ----------------------------
kubectl [command] [TYPE] [NAME] [flags]

# ----------------------------
# Apply YAML files
# ----------------------------
kubectl apply -f [filename]

# ----------------------------
# Installation Aliases
# ----------------------------
alias k8s="kubectl"
alias k8scontexts="kubectl config get-contexts"

# ----------------------------
# Configurations
# ----------------------------
kubectl config get-contexts   # List available contexts
kubectl config use-context CONTEXT_NAME  # Switch context

# ----------------------------
# Debugging Workspace
# ----------------------------
kubectl get namespaces
kubectl get pods
kubectl get nodes
kubectl get pods -n NAMESPACE
kubectl describe pod POD_NAME -n NAMESPACE
kubectl logs <pod-name> -n <namespace>

# ----------------------------
# Cluster Health & Nodes
# ----------------------------
kubectl cluster-info
kubectl get nodes
kubectl describe node NODE_NAME
kubectl get nodes -o custom-columns=NAME:.metadata.name,CPU:.status.capacity.cpu,MEM:.status.capacity.memory
kubectl get nodes --field-selector=status.conditions[type=Ready]
kubectl describe node NODE_NAME | grep -i capacity -A 10
kubectl logs kubelet-NODE_NAME -n kube-system
kubectl get componentstatus
kubectl get pods -n kube-system

# ----------------------------
# Pod Health & Status, Restart Count, Evictions
# ----------------------------
kubectl get pods
kubectl get pods -n NAMESPACE
kubectl describe pod POD_NAME -n NAMESPACE
kubectl logs POD_NAME -n NAMESPACE
kubectl logs -f POD_NAME -n NAMESPACE
kubectl top pod POD_NAME -n NAMESPACE
kubectl get events --field-selector involvedObject.name=POD_NAME -n NAMESPACE
kubectl delete pod POD_NAME -n NAMESPACE
kubectl describe pod POD_NAME -n NAMESPACE | grep -A 2 "Readiness"
kubectl describe pod POD_NAME -n NAMESPACE | grep -A 2 "Liveness"
kubectl get pods --sort-by='.status.containerStatuses[0].restartCount'
kubectl get pods --sort-by='.status.containerStatuses[0].restartCount' -n NAMESPACE
kubectl describe pod POD_NAME -n NAMESPACE | grep "Restart Count"
kubectl get pods -o custom-columns="POD:metadata.name,RESTARTS:.status.containerStatuses[0].restartCount"
kubectl get events --field-selector=involvedObject.name=POD_NAME,involvedObject.kind=Pod -n NAMESPACE
kubectl get events --field-selector=involvedObject.kind=Pod --sort-by='.metadata.creationTimestamp'

# ----------------------------
# CPU & Memory Usage
# ----------------------------
kubectl top nodes
kubectl top pods
kubectl top pods -n NAMESPACE
kubectl top pod POD_NAME -n NAMESPACE
kubectl top pod --all-namespaces
kubectl top pod POD_NAME --containers -n NAMESPACE
kubectl top pod POD_NAME --containers=CONTAINER_NAME -n NAMESPACE

# ----------------------------
# Storage Usage: Persistent Volume Claims
# ----------------------------
kubectl get pv
kubectl describe pv PV_NAME
kubectl get pvc
kubectl get pvc -n NAMESPACE
kubectl describe pvc PVC_NAME -n NAMESPACE
kubectl get storageclasses
kubectl describe storageclass STORAGE_CLASS_NAME
kubectl get pv --sort-by=.spec.capacity.storage
kubectl get pvc --sort-by=.status.capacity.storage -n NAMESPACE
kubectl get events --field-selector=involvedObject.kind=PersistentVolumeClaim -n NAMESPACE

# ----------------------------
# Node Scaling & Autoscaling
# ----------------------------
kubectl get nodes
kubectl describe node NODE_NAME
kubectl get hpa --all-namespaces
kubectl get cluster-autoscaler --namespace kube-system
kubectl get events --field-selector=involvedObject.kind=HorizontalPodAutoscaler -A
kubectl top nodes
kubectl top pods --all-namespaces
kubectl logs -n kube-system cluster-autoscaler-POD_NAME
kubectl describe hpa HPA_NAME -n NAMESPACE
kubectl get nodes -o custom-columns=NAME:.metadata.name,CONDITIONS:.status.conditions[*].type

# ----------------------------
# API Server Latency
# ----------------------------
kubectl get componentstatuses
kubectl exec -it -n kube-system kube-apiserver-POD_NAME -- /bin/sh
curl -k https://localhost:6443/metrics
kubectl logs -n kube-system kube-apiserver-POD_NAME
curl -k -v https://localhost:6443/healthz
kubectl get events --field-selector=involvedObject.name=kube-apiserver-POD_NAME -n kube-system
kubectl top pods -n kube-system kube-apiserver-POD_NAME

# ----------------------------
# Events & Logs
# ----------------------------
kubectl get events --all-namespaces
kubectl get events -n NAMESPACE
kubectl describe RESOURCE_TYPE RESOURCE_NAME -n NAMESPACE
kubectl logs POD_NAME -n NAMESPACE
kubectl logs POD_NAME -c CONTAINER_NAME -n NAMESPACE
kubectl logs -f POD_NAME -n NAMESPACE
kubectl logs --previous POD_NAME -c CONTAINER_NAME -n NAMESPACE
kubectl exec -it POD_NAME -c CONTAINER_NAME -n NAMESPACE -- /bin/sh

# ----------------------------
# Deployments & Replicas
# ----------------------------
kubectl get deployments
kubectl get deployments -n NAMESPACE
kubectl describe deployment DEPLOYMENT_NAME -n NAMESPACE
kubectl get replicasets -n NAMESPACE --selector=app=DEPLOYMENT_NAME
kubectl get events --field-selector=involvedObject.name=DEPLOYMENT_NAME,involvedObject.kind=Deployment -n NAMESPACE

# ----------------------------
# Load Balancing
# ----------------------------
kubectl get services
kubectl get services -n NAMESPACE
kubectl describe service SERVICE_NAME -n NAMESPACE
kubectl get endpoints SERVICE_NAME -n NAMESPACE
kubectl get events --field-selector=involvedObject.name=SERVICE_NAME,involvedObject.kind=Service -n NAMESPACE

# ----------------------------
# Network Traffic
# ----------------------------
kubectl get networkpolicies --all-namespaces
kubectl get ingress --all-namespaces
kubectl exec -it POD_NAME -n NAMESPACE -- traceroute DESTINATION_IP
kubectl exec -it POD_NAME -n NAMESPACE -- tcpdump -i eth0
kubectl port-forward POD_NAME LOCAL_PORT:REMOTE_PORT -n NAMESPACE

# ----------------------------
# Ingress & Egress Traffic
# ----------------------------
kubectl get ingress
kubectl get ingress -n NAMESPACE
kubectl describe ingress INGRESS_NAME -n NAMESPACE

# ----------------------------
# K9s Commands
# ----------------------------
k9s
k9s -cpod
k9s -n NAMESPACE

# Resource Management
?      # List shortcuts
A      # Select all
E      # Activate command line
F      # Filter mode
R      # Refresh resource
S      # Save resource
W      # Open new tab

# Navigation
0       # View all pods
/       # Start search
:       # Change viewing panel
:ctx    # Switch context

# Pod & Container Operations
l  # logs
s  # shell access
e  # edit
d  # delete

# Sorting
Shift + M  # sort by memory
```

---

## Triage

:::danger
Symptoms of issues with Kubernetes clusters and how to triage:
:::

| Symptom                   | TLDR of Root Cause                        | What to Check                                   | Action to Propose |
|----------------------------|------------------------------------------|-------------------------------------------------|-----------------|
| Pod CrashLoopBackOff       | Container misconfiguration or crash      | `kubectl describe pod <name>`, logs            | Fix container image or config, restart pod |
| Node Not Ready             | Node down or network issue               | `kubectl get nodes`, node events               | Investigate node health, restart node or kubelet |
| Deployment Not Scaling     | HPA misconfigured or resource limits     | `kubectl describe hpa`, metrics                | Adjust HPA or resource requests/limits |
| PersistentVolume Pending   | PV not bound or storage issue            | `kubectl get pv,pvc`, events                   | Provision storage, bind PVC to PV |
| Service Unreachable        | Networking or service misconfigured      | `kubectl get svc`, endpoints, network policies | Fix service or ingress config |
| API Server Unresponsive    | Overloaded control plane or auth issue   | `kubectl cluster-info`, API server logs       | Scale control plane, validate RBAC |
| ConfigMap/Secret Missing   | Resource deleted or misconfigured        | `kubectl get configmap/secret`                | Restore or recreate resource |
