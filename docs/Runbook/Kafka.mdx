---
title: "Kafka"
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::tip Kafka
**Apache Kafka** is a distributed event streaming platform used to build realâ€‘time data pipelines and eventâ€‘driven applications. It provides highâ€‘throughput, faultâ€‘tolerant, scalable messaging using an appendâ€‘only log.
:::


```mermaid
Kafka
â”œâ”€â”€ Messaging & Streaming
â”‚   â”œâ”€â”€ Topics & Partitions
â”‚   â”œâ”€â”€ Brokers & Clusters
â”‚   â”œâ”€â”€ Consumer Groups
â”‚   â””â”€â”€ Retention & Replication
â”œâ”€â”€ TA Skills
â”‚   â”œâ”€â”€ Review Topics & Configs
â”‚   â”œâ”€â”€ Validate Consumers & Producers
â”‚   â”œâ”€â”€ Monitor Cluster Health
â”‚   â””â”€â”€ Check Retention & ACLs
â””â”€â”€ SWE Skills
    â”œâ”€â”€ Produce/Consume Messages
    â”œâ”€â”€ Create/Delete Topics
    â”œâ”€â”€ Manage Consumer Groups
    â””â”€â”€ Monitor & Scale Cluster
```

---

##  ðŸ§© Technical Skills

<Tabs>
<TabItem value="skill" label="Skill">

```shell
--------------
How to use Kafka as a TA
--------------

# List topics
kafka-topics.sh --bootstrap-server <broker>:9092 --list

# Check topic configuration and partitions
kafka-topics.sh --describe --topic <topic> --bootstrap-server <broker>:9092

# Inspect consumer groups
kafka-consumer-groups.sh --bootstrap-server <broker>:9092 --list
kafka-consumer-groups.sh --describe --group <group>

# Check consumer lag (MAE / MCE)
# MAE = messages after end (consumer behind)
# MCE = messages consumed end (bytes/messages consumed)
# High MAE = consumer is falling behind

# Monitor cluster health
# - Under-replicated partitions
# - Offline partitions
# - Broker availability

# Validate retention policies and message sizes
# Ensure critical topics have correct retention windows

# Verify ACLs and access for producers and consumers
```

</TabItem>
<TabItem value="requirements" label="Requirements">

**How to formulate requirements when working with Kafka**

* Identify topics, expected throughput, and message size
* Determine producers and consumers (and their ownership)
* Confirm cluster topology (brokers, replication factor, partitions)
* Define retention policies (timeâ€‘based or sizeâ€‘based)
* Confirm monitoring and alerting expectations
* Identify consumer group behaviour (parallelism, ordering needs)
* Validate authentication and authorization (SASL/SSL, ACLs)

</TabItem>
</Tabs>

---

## Preâ€‘Requisites

| Action / Service            | What TA Needs to Gather / Confirm                                                                 |
|-----------------------------|---------------------------------------------------------------------------------------------------|
| Install / Setup             | Kafka cluster deployed, brokers running, Zookeeper (if applicable)                                |
| Access & Login              | Client credentials, SASL/SSL configs, ACLs verified                                               |
| API / CLI Tools             | Kafka CLI tools available (`kafka-topics.sh`, `kafka-console-producer.sh`, etc.)                  |
| Other tool-specific actions | Monitoring tools (Prometheus, Grafana), retention policies, topic naming conventions              |

---

## Engineering

<Tabs>
<TabItem value="skill" label="Skill">

```shell
--------------
Common ways engineers use Kafka
--------------

# Produce messages to a topic
kafka-console-producer.sh --broker-list <broker>:9092 --topic <topic>

# Consume messages from a topic
kafka-console-consumer.sh --bootstrap-server <broker>:9092 --topic <topic> --from-beginning

# Create new topics
kafka-topics.sh --create --topic <topic> --bootstrap-server <broker>:9092 --partitions 3 --replication-factor 2

# Delete topics
kafka-topics.sh --delete --topic <topic> --bootstrap-server <broker>:9092

# Manage consumer groups
kafka-consumer-groups.sh --bootstrap-server <broker>:9092 --group <group> --reset-offsets --to-earliest --execute

# Monitor lag and cluster health via CLI or JMX metrics
```

</TabItem>

<TabItem value="engineering" label="Engineering">

**How to formulate a plan for development**

* Map required topics and partitions
* Define producer/consumer configs and throughput expectations
* Establish cluster sizing (brokers, replication factor, partitions)
* Implement monitoring, alerting, and retention policies
* Integrate Kafka with CI/CD pipelines
* Provide TA handover: topics, ACLs, consumer groups, dashboards, usage patterns

</TabItem>
</Tabs>

---

## Triage

:::danger
Symptoms and issues with Kafka and how to triage:
:::

| Symptom                | TLDR Root Cause                                   | What to Check                                                                 | Action to Propose                                                                 |
|------------------------|----------------------------------------------------|-------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|
| Brokers down           | Node failure, JVM crash, network issue             | Broker logs, cluster status, controller broker, Zookeeper/KRaft               | Restart broker, fix network, rebalance partitions                                 |
| Consumer lag           | Slow consumers, blocked processing, hot partitions | Consumer group offsets, MAE/MCE metrics, partition skew                       | Add consumers, fix processing bottlenecks, rebalance partitions                    |
| Topic unavailable      | Topic deleted, ACL issue, misconfiguration         | Topic list, ACLs, broker logs                                                 | Recreate topic, fix ACLs, validate replication factor                              |
| Messages not delivered | Retention expired, partition offline               | Retention settings, partition status, producer logs                           | Increase retention, fix partition availability, adjust producer retries            |
| High latency           | Overloaded broker, network bottleneck              | Broker CPU, network throughput, replication lag                               | Scale brokers, optimize network, adjust batching                                   |
| Data loss              | Under-replicated partitions, misconfigured RF      | Replication factor, ISR list, broker failures                                 | Increase replication factor, restore brokers, enforce min.insync.replicas          |
| Hot partitions         | Poor partition key, uneven distribution            | Partition message counts, consumer lag per partition                          | Redesign partition key, increase partitions, rebalance                             |
| Serialization errors   | Schema mismatch, bad producer code                 | Producer logs, consumer deserialization errors                                | Fix schema, enforce schema registry, update clients                                |
| High disk usage        | Retention too long, segment bloat                  | Topic size, retention settings, segment count                                 | Apply ILM/retention, compact logs, add storage                                     |
| Slow startup / rebalance | Large state stores, many partitions              | Broker logs, partition count, consumer group rebalance events                 | Reduce partitions, optimize consumer group size, upgrade hardware                  |

